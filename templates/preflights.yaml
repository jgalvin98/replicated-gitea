apiVersion: v1
kind: Secret
metadata:
  name: gitea-preflight
  labels:
    troubleshoot.sh/kind: preflight
stringData: 
  preflight.yaml: |- 
    apiVersion: troubleshoot.sh/v1beta2
    kind: Preflight
    metadata:
      name: gitea-preflight
    spec:
      collectors:      
        - clusterInfo: {}
        - clusterResources: {}
      analyzers:
        - clusterVersion:
            outcomes:
            - fail:
                message: This application relies on kubernetes features only present in 1.16.0
                  and later.
                uri: https://kubernetes.io
                when: < 1.16.0
            - warn:
                message: Your cluster is running a version of kubernetes that is out of support.
                uri: https://kubernetes.io
                when: < 1.24.0
            - pass:
                message: Your cluster meets the recommended and required versions of Kubernetes.
        - nodeResources:
            checkName: One node must have 2 GB RAM and 1 CPU Cores
            filters:
              allocatableMemory: 2Gi
              cpuCapacity: "1"
            outcomes:
              - fail:
                  when: count() < 1
                  message: Cannot find a node with sufficient memory and cpu
              - pass:
                  message: Sufficient CPU and memory is available